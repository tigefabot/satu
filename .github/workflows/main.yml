name: "FFmpeg"
on: 
  push:
    branches:
    - master

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - run: |
        sudo apt-get update
        sudo apt-get install -yqq sudo lsb-base lsb-release apt-transport-https ca-certificates software-properties-common wget curl netcat aria2 whois figlet p7zip p7zip-full zip unzip
        sudo apt-get install -yqq wget aria2 ffmpeg telnet tree
        aria2c --check-certificate=false --header 'Host: nl38.seedr.cc' --user-agent 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:78.0) Gecko/20100101 Firefox/78.0' --header 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8' --header 'Accept-Language: id,en-US;q=0.7,en;q=0.3' --header 'Proxy-Authorization: Basic QFRLLTViNTIyMzNkLWQxNTAtNGQzMi05NTI2LTQ0NzhhM2Y3ZTg4ODpAVEstNWI1MjIzM2QtZDE1MC00ZDMyLTk1MjYtNDQ3OGEzZjdlODg4' --referer 'https://www.seedr.cc/files/137409858' --header 'Upgrade-Insecure-Requests: 1' 'https://nl38.seedr.cc/ff_get/710553267/BigNaturals.20.03.06.Codi.Vore.Cum.For.Codi.XXX.SD.MP4-KLEENEX.mp4?st=s7sAyFUX_415J1lC3YF2iQ&e=1595620401' --out 'BigNaturals.20.03.06.Codi.Vore.Cum.For.Codi.XXX.SD.MP4-KLEENEX.mp4'
        ffmpeg -i "BigNaturals.20.03.06.Codi.Vore.Cum.For.Codi.XXX.SD.MP4-KLEENEX.mp4" -threads 16 -c:v libx265 -c:a copy -metadata title="Codi Vore" -preset veryfast codi.vore.001.x265.mp4
        ls -hal
    - name: "Deploy dropbox"
      uses: aTable/deploy-to-dropbox@v1.0.7
      with:
        DROPBOX_ACCESS_TOKEN: ${{ secrets.DROPBOX_ACCESS_TOKEN }}
        DROPBOX_DESTINATION_PATH_PREFIX: "/"
        GLOB: "codi.vore.001.x265.mp4"
        DEBUG: false
